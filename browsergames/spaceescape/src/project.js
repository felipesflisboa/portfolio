require=function s(a,c,o){function l(e,t){if(!c[e]){if(!a[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(u)return u(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var r=c[e]={exports:{}};a[e][0].call(r.exports,function(t){return l(a[e][1][t]||t)},r,r.exports,s,a,c,o)}return c[e].exports}for(var u="function"==typeof require&&require,t=0;t<o.length;t++)l(o[t]);return l}({Actor:[function(t,e,i){"use strict";cc._RF.push(e,"ca517EUaI1C4IkF1jwjmPAM","Actor"),function(){cc.Class({extends:cc.Component,properties:{explosionPrefab:cc.Prefab,RigidBody:{visible:!1,get:function(){return null==this._rigidBody&&(this._rigidBody=this.node.getComponent(cc.RigidBody)),this._rigidBody}}},explode:function(){var t;return this.explosionPrefab&&(t=cc.instantiate(this.explosionPrefab),this.node.parent.addChild(t),t.setPosition(this.node.position)),this.finish()},finish:function(){return this.node.destroy()}})}.call(this),cc._RF.pop()},{}],CharacterAnimationController:[function(t,e,i){"use strict";cc._RF.push(e,"3620et1j4ZEaafwxWcgiI4a","CharacterAnimationController"),function(){cc.Class({initialize:function(t,e,i){return this.character=t,this.speedMultiplier=i,this.animation=e,this.currentState=null},refresh:function(){var t,e;return t=this.character.CanMove?this.character.direction:cc.Vec2.ZERO,null!=(e=function(){switch(!1){case 1!==t.y:return"WalkUp";case-1!==t.y:return"WalkDown";case 1!==t.x:return"WalkRight";case-1!==t.x:return"WalkLeft";default:return null}}())?this.play(e):this.animation.pause()},play:function(t){var e;if((null!=(e=this.currentState)?e.name:void 0)!==t)return this.currentState=this.animation.play(t),this.currentState.speed=this.character.speed*this.speedMultiplier;this.currentState.isPaused&&this.animation.resume()}})}.call(this),cc._RF.pop()},{}],Character:[function(n,t,e){"use strict";cc._RF.push(t,"36a9bCKfElDMJ5N0hgtKeZz","Character"),function(){var e,t,i;t=n("GameManager"),i=n("NodeUtil"),e=n("CharacterAnimationController"),cc.Class({extends:n("Actor"),properties:{CanMove:{visible:!1,get:function(){return this.canMove()}}},canMove:function(){return t.i().Occurring&&!t.i().paused},start:function(){return{}},onLoad:function(){var t;if(this.direction=cc.Vec2.ZERO,this.lastUsedDirection=cc.Vec2.ZERO,this.lastSpeed=0,null!=(t=i.getComponentInChildrenInclusive(this.node,cc.Animation))?t.enabled:void 0)return this.animationController=new e,this.animationController.initialize(this,t,.0016)},update:function(t){var e;if((e=this.CanMove?this.direction:cc.Vec2.ZERO)!==this.lastUsedDirection||this.lastSpeed!==this.speed)return this.refreshVelocity(e)},refreshVelocity:function(t){var e;return e=t.mul(this.speed),this.RigidBody.linearVelocity=e,null!=this.animationController&&this.animationController.refresh(),this.lastSpeed=this.speed,this.lastUsedDirection=t.clone()}})}.call(this),cc._RF.pop()},{Actor:"Actor",CharacterAnimationController:"CharacterAnimationController",GameManager:"GameManager",NodeUtil:"NodeUtil"}],DateUtil:[function(t,i,e){"use strict";cc._RF.push(i,"eefe4jEhIVDmJ8JwdgRIPMT","DateUtil"),function(){i.exports.secondsInterval=function(t,e){return Math.round(i.exports.millisecondsInterval(t,e)/1e3)},i.exports.millisecondsInterval=function(t,e){return null==t?0:(null!=e?e:Date.now())-t}}.call(this),cc._RF.pop()},{}],Direction:[function(t,e,i){"use strict";cc._RF.push(e,"17a82LzIypOBoaer8097yJW","Direction"),function(){e.exports.UP=cc.Vec2.UP,e.exports.RIGHT=cc.Vec2.RIGHT,e.exports.DOWN=cc.Vec2.UP.mul(-1),e.exports.LEFT=cc.Vec2.RIGHT.mul(-1)}.call(this),cc._RF.pop()},{}],EndingController:[function(t,e,i){"use strict";cc._RF.push(e,"125fbHW/0FCEpzixMx5hUko","EndingController"),function(){var e;e=t("Direction"),cc.Class({extends:cc.Component,properties:{shipNode:cc.Node,spaceBaseNode:cc.Node,backgroundNode:cc.Node},onLoad:function(){return cc.view.enableAntiAlias(!1),this.shipNode.active=!1,setTimeout(this.enableShip.bind(this),1600),setTimeout(this.finish.bind(this),9600)},update:function(t){if(this.backgroundNode.position=this.backgroundNode.position.add(cc.Vec2.ONE.mul(.9*t)),this.spaceBaseNode.position=this.spaceBaseNode.position.add(e.DOWN.mul(.5*t)),this.shipNode.active)return this.shipNode.position=this.shipNode.position.add(e.RIGHT.mul(15*t))},enableShip:function(){return this.shipNode.active=!0},finish:function(){return cc.director.loadScene("Menu")}})}.call(this),cc._RF.pop()},{Direction:"Direction"}],EnemyEventHelper:[function(e,t,i){"use strict";cc._RF.push(t,"71a9bRKmfJJ/6pcviCex5Kb","EnemyEventHelper"),function(){var n,t;t=e("Enemy"),n=e("Direction"),cc.Class({extends:cc.Component,editor:{requireComponent:t},onLoad:function(){return this.enemy=this.node.getComponent(t)},up:function(t,e){return this.addTileStep(n.UP,this.parseEvent(e))},left:function(t,e){return this.addTileStep(n.LEFT,this.parseEvent(e))},down:function(t,e){return this.addTileStep(n.DOWN,this.parseEvent(e))},right:function(t,e){return this.addTileStep(n.RIGHT,this.parseEvent(e))},circleUpRight:function(t,e){var i;return i=[n.UP,n.RIGHT,n.DOWN,n.LEFT],this.addTileStep(i,this.parseEvent(e))},circleRightDown:function(t,e){var i;return i=[n.RIGHT,n.DOWN,n.LEFT,n.UP],this.addTileStep(i,this.parseEvent(e))},circleDownLeft:function(t,e){var i;return i=[n.DOWN,n.LEFT,n.UP,n.RIGHT],this.addTileStep(i,this.parseEvent(e))},circleLeftUp:function(t,e){var i;return i=[n.LEFT,n.UP,n.RIGHT,n.DOWN],this.addTileStep(i,this.parseEvent(e))},circleUpLeft:function(t,e){var i;return i=[n.UP,n.LEFT,n.DOWN,n.RIGHT],this.addTileStep(i,this.parseEvent(e))},circleLeftDown:function(t,e){var i;return i=[n.LEFT,n.DOWN,n.RIGHT,n.UP],this.addTileStep(i,this.parseEvent(e))},circleDownRight:function(t,e){var i;return i=[n.DOWN,n.RIGHT,n.UP,n.LEFT],this.addTileStep(i,this.parseEvent(e))},circleRightUp:function(t,e){var i;return i=[n.RIGHT,n.UP,n.LEFT,n.DOWN],this.addTileStep(i,this.parseEvent(e))},addTileStep:function(t,n){var r,e,i,s;for(Array.isArray(t)||(t=[t]),s=[],e=0,i=t.length;e<i;e++)r=t[e],s.push(function(){var t,e,i;for(i=[],t=0,e=n;0<=e?t<e:e<t;0<=e?t++:t--)i.push(this.enemy.directionArray.push(r));return i}.call(this));return s},parseEvent:function(t){return t?parseInt(t):1}})}.call(this),cc._RF.pop()},{Direction:"Direction",Enemy:"Enemy"}],Enemy:[function(t,e,i){"use strict";cc._RF.push(e,"aaf0bPLRvJMc7ODlumcZy3X","Enemy"),function(){var e,r,s;s=t("Player"),t("Input"),e=t("Direction"),t("MathUtil"),r=t("NodeUtil"),cc.Class({extends:t("Character"),properties:{definedSpeed:32,commandList:[cc.Component.EventHandler],OnDestiny:{visible:!1,get:function(){var t;switch(t=.01*this.speed,this.directionArray[this.index]){case e.UP:return this.node.position.y>=this.destiny.y-t;case e.DOWN:return this.node.position.y<=this.destiny.y+t;case e.RIGHT:return this.node.position.x>=this.destiny.x-t;case e.LEFT:return this.node.position.x<=this.destiny.x+t}}}},onLoad:function(){return this._super(),this.speed=this.definedSpeed,this.destiny=cc.Vec2.ZERO,this.index=-1,this.directionArray=[]},start:function(){return this._super(),cc.Component.EventHandler.emitEvents(this.commandList,null),this.directionsAreValid(this.directionArray)||cc.error(this.node.name+" directionArray won't sum 0!"),this.initializeNextDestiny()},update:function(t){if(this._super(),this.OnDestiny)return this.initializeNextDestiny()},lateUpdate:function(t){return this.collidedWithPlayerLastFrame=!1},directionsAreValid:function(t){var e,i,n,r;for(r=cc.Vec2.ZERO,i=0,n=t.length;i<n;i++)e=t[i],r.addSelf(e);return 0===r.mag()},initializeNextDestiny:function(){return this.index=(this.index+1)%this.directionArray.length,this.destiny=this.node.position.add(this.directionArray[this.index].mul(16)),this.direction=this.directionArray[this.index]},onBeginContact:function(t,e,i){var n;if(cc.isValid(this.node)&&!this.collidedWithPlayerLastFrame)return null!=(n=r.getComponentInParent(i.node,s))?(this.collidedWithPlayerLastFrame=!0,n.receiveDamage(1),this.explode()):void 0}})}.call(this),cc._RF.pop()},{Character:"Character",Direction:"Direction",Input:"Input",MathUtil:"MathUtil",NodeUtil:"NodeUtil",Player:"Player"}],ExitPoint:[function(t,e,i){"use strict";cc._RF.push(e,"047050JDpdAi7HBiimMM3+1","ExitPoint"),function(){var n,r,s;n=t("GameManager"),s=t("Player"),r=t("NodeUtil"),cc.Class({extends:cc.Component,onBeginContact:function(t,e,i){if(null!=r.getComponentInParent(i.node,s))return n.i().stageClear()}})}.call(this),cc._RF.pop()},{GameManager:"GameManager",NodeUtil:"NodeUtil",Player:"Player"}],FlashingLabel:[function(t,e,i){"use strict";cc._RF.push(e,"8cfb2rY86VLKLFpe9WE2jB0","FlashingLabel"),function(){cc.Class({extends:cc.Component,properties:{secondsDisplaying:1,secondsAway:1},onLoad:function(){return this.disappears()},display:function(){if(null!=this.node)return this.node.opacity=255,setTimeout(this.disappears.bind(this),1e3*this.secondsDisplaying)},disappears:function(){if(null!=this.node)return this.node.opacity=0,setTimeout(this.display.bind(this),1e3*this.secondsAway)}})}.call(this),cc._RF.pop()},{}],FormatUtil:[function(t,e,i){"use strict";cc._RF.push(e,"fb8e0d31kpC0Jy8SuYmorgU","FormatUtil"),function(){e.exports.exactDigits=function(t,e){return("0".repeat(e-1)+t).slice(-e)}}.call(this),cc._RF.pop()},{}],GameData:[function(i,t,e){"use strict";cc._RF.push(t,"953d4UkmwxF0qAL3oFpE/v0","GameData"),function(){var t,e;t=i("DateUtil"),e=cc.Class({properties:{Seconds:{visible:!1,get:function(){return t.secondsInterval(this.startTime,this.endTime)}},Finished:{visible:!1,get:function(){return null!=this.endTime}}},static:{generateDebugInstance:function(){var t;return(t=new e).initialize(),t.lastStageNumber=1,t.endTime=new Date,t.totalHits=2,t}},initialize:function(){return this.startTime=new Date,this.endTime=null,this.lastStageNumber=0,this.totalHits=0}})}.call(this),cc._RF.pop()},{DateUtil:"DateUtil"}],GameManager:[function(r,t,e){"use strict";cc._RF.push(t,"ef5a2VC73pG6pHSZCAee+Da","GameManager"),function(){var t,e,i,n;n=r("Input"),t=r("DateUtil"),e=r("GameData"),i=cc.Class({extends:cc.Component,statics:{_i:null,data:null,i:function(){return null!==this._i&&cc.isValid(this._i)||(this._i=cc.find("GameManager").getComponent(i)),this._i}},properties:{playerPrefab:cc.Prefab,uiPrefab:cc.Prefab,stageTimeEndingSFX:cc.AudioSource,deathSFX:cc.AudioSource,pauseSFX:cc.AudioSource,stageClearSFX:cc.AudioSource,sceneNameArray:[cc.String],Canvas:{visible:!1,get:function(){return null==this._canvas&&(this._canvas=cc.find("Canvas").getComponent(cc.Canvas)),this._canvas}},Stage:{visible:!1,get:function(){return null==this._stage&&(this._stage=this.Canvas.node.getComponentInChildren(r("Stage"))),this._stage}},Seconds:{visible:!1,get:function(){return i.data.Seconds}},StageRemainingSeconds:{visible:!1,get:function(){return 40-t.secondsInterval(this.stageStartTime,this.stageEndTime)}},TimeEnding:{visible:!1,get:function(){return this.StageRemainingSeconds<=5}},TotalHits:{visible:!1,get:function(){return i.data.totalHits},set:function(t){return i.data.totalHits=t}},CurrentAudio:{visible:!1,get:function(){return this.TimeEnding?this.stageTimeEndingSFX:this.Stage.bgm}},Paused:{visible:!1,get:function(){return null!=this.pauseStartTime}},FinishingStage:{visible:!1,get:function(){return null!=this.stageEndTime}},Occurring:{visible:!1,get:function(){return null!=i.data.startTime&&null==i.data.endTime&&!this.Paused}},Busy:{visible:!1,get:function(){return!this.Occurring||this.FinishingStage}}},onLoad:function(){return this.registerInput(),cc.director.getPhysicsManager().enabled=!0,cc.view.enableAntiAlias(!1)},start:function(){return this.player=cc.instantiate(this.playerPrefab).getComponent(r("Player")),this.ui=cc.instantiate(this.uiPrefab).getComponent(r("GameUI")),this.Canvas.node.addChild(this.ui.node),this.Stage.initialize(),this.initializeCamera(),(this.pauseStartTime=null)==i.data&&(i.data=new e,i.data.initialize()),i.data.lastStageNumber=this.Stage.Number,null==this.stageStartTime&&(this.stageStartTime=new Date),setTimeout(this.startStage.bind(this),1)},registerInput:function(){n.register(),n.registerCallback(this.togglePause.bind(this),cc.KEY.space,cc.KEY.enter),n.registerCallback(this.onEscapeKeyPress.bind(this),cc.KEY.escape)},enablePhysicsDebug:function(){return cc.director.getPhysicsManager().debugDrawFlags=cc.PhysicsManager.DrawBits.e_aabbBit|cc.PhysicsManager.DrawBits.e_pairBit|cc.PhysicsManager.DrawBits.e_centerOfMassBit|cc.PhysicsManager.DrawBits.e_jointBit|cc.PhysicsManager.DrawBits.e_shapeBit,cc.director.getPhysicsManager().attachDebugDrawToCamera(cc.Camera.main)},startStage:function(){return this.ui.hud.enableRefresh(),this.schedule(this.stageTimeOverCheck,.2)},initializeCamera:function(){var t;return t=(new cc.Node).addComponent(cc.Camera),this.player.attachCamera(t),t.addTarget(this.Stage.node)},togglePause:function(){var t;if(!(this.Seconds<1))return this.Paused?(t=Date.now()-this.pauseStartTime,this.pauseStartTime=null,this.stageStartTime=new Date(this.stageStartTime.getTime()+t),i.data.startTime=new Date(i.data.startTime.getTime()+t),this.CurrentAudio.isPlaying||this.CurrentAudio.play(),this.stageTimeOverCheck()):(this.pauseStartTime=new Date,this.CurrentAudio.isPlaying&&this.CurrentAudio.stop()),this.pauseSFX.isPlaying&&this.pauseSFX.stop(),this.pauseSFX.play(),this.ui.pauseMask.active=this.Paused},onEscapeKeyPress:function(){if(this.Paused)return this.exit()},onDebugKeyPress:function(t){if(t.keyCode===cc.KEY.e)return this.stageClear()},stageTimeOverCheck:function(){if(!this.Busy&&this.TimeEnding&&(this.stageTimeEndingSFX.isPlaying||(this.Stage.bgm.stop(),this.stageTimeEndingSFX.play()),!(-1<this.StageRemainingSeconds)))return this.stageTimeEndingSFX.stop(),this.player.timeOver()},stageClear:function(){return this.finishStage(),this.stageClearSFX.play(),setTimeout(this.goIntoNextStage.bind(this),1200)},goIntoNextStage:function(){return this.Stage.Number===this.sceneNameArray.length-1?this.gameClear():cc.director.loadScene(this.sceneNameArray[this.Stage.Number+1])},onDeath:function(){return this.finishStage(),this.deathSFX.play(),setTimeout(function(){return cc.director.loadScene(cc.director.getScene().name)},3e3)},finishStage:function(){return this.stageEndTime=new Date,this.Stage.bgm.stop()},gameClear:function(){return i.data.endTime=new Date,cc.director.loadScene("Ending")},exit:function(){return cc.director.loadScene("Menu")},onDestroy:function(){n.unregister()}})}.call(this),cc._RF.pop()},{DateUtil:"DateUtil",GameData:"GameData",GameUI:"GameUI",Input:"Input",Player:"Player",Stage:"Stage"}],GameUI:[function(t,e,i){"use strict";cc._RF.push(e,"1230a40Y0dG1o+jzTLbo9s5","GameUI"),function(){cc.Class({extends:cc.Component,properties:{pauseMask:cc.Node},onLoad:function(){return this.hud=this.node.getComponentInChildren(t("HUD")),this.pauseMask.active=!1}})}.call(this),cc._RF.pop()},{HUD:"HUD"}],HUD:[function(t,e,i){"use strict";cc._RF.push(e,"aebc7pyE5JIUKKQPgeYV9iN","HUD"),function(){var n,r;r=t("GameManager"),n=t("FormatUtil"),cc.Class({extends:cc.Component,properties:{heartRect:t("HeartRect"),totalHitsLabel:cc.Label,stageLabel:cc.Label,timeLabel:cc.Label,stageRemainingTimeLabel:cc.Label},enableRefresh:function(){return this.schedule(this.refresh,.2),this.refresh()},refresh:function(){var t,e,i;return this.heartRect.Value=r.i().player.hp,this.totalHitsLabel.string=n.exactDigits(r.i().TotalHits,3),this.stageLabel.string="STAGE "+r.i().Stage.Number,this.stageRemainingTimeLabel.string=Math.max(r.i().StageRemainingSeconds,0),t=r.i().Seconds,e=n.exactDigits(Math.floor(t/60),2),i=n.exactDigits(t%60,2),this.timeLabel.string=e+":"+i}})}.call(this),cc._RF.pop()},{FormatUtil:"FormatUtil",GameManager:"GameManager",HeartRect:"HeartRect"}],HeartRect:[function(t,e,i){"use strict";cc._RF.push(e,"367361AwYVHi6v0bLIJWfxm","HeartRect"),function(){cc.Class({extends:cc.Component,properties:{spriteArray:[cc.Sprite],Value:{visible:!1,get:function(){return this._value},set:function(t){if(null==this._value||this._value!==t)return this._value=t,this.refresh()}}},refresh:function(){var t,e,i,n;for(n=[],t=e=0,i=this.spriteArray.length;0<=i?e<i:i<e;t=0<=i?++e:--e)n.push(this.spriteArray[t].node.active=this.Value>t);return n}})}.call(this),cc._RF.pop()},{}],IncreasingNumberLabel:[function(t,e,i){"use strict";cc._RF.push(e,"aaf5cXO4u5IUZfaR6Xwpmac","IncreasingNumberLabel"),function(){var e;e=null,cc.Class({extends:cc.Component,editor:{requireComponent:cc.Label},properties:{numberPerSecond:100,digitsNumber:{default:0,type:cc.Integer,tooltip:"When isn't 0, calls FormatUtil.exactDigits with the digitsNumber"},sfx:{default:null,type:cc.AudioSource,tooltip:"For playing with number animation"}},onLoad:function(){if(this.label=this.node.getComponent(cc.Label),this.animating=!1,0<this.digitsNumber)return e=t("FormatUtil")},startAnimation:function(t,e){if(this.value=t,this.callback=e,this.animating=!0,null!=this.sfx)return this.sfx.play()},forceValue:function(t){return this.value=t,this.complete()},update:function(t){if(this.animating)return this.current+=this.numberPerSecond*t,this.refresh(),this.current>=this.value?this.complete():void 0},refresh:function(){var t;return t=Math.floor(this.current),0<this.digitsNumber?this.label.string=e.exactDigits(t,this.digitsNumber):t.toString()},complete:function(){return this.current=this.value,this.refresh(),this.animating=!1,null!=this.sfx&&this.sfx.stop(),"function"==typeof this.callback&&this.callback(),this.callback=null}})}.call(this),cc._RF.pop()},{FormatUtil:"FormatUtil"}],Input:[function(t,e,i){"use strict";cc._RF.push(e,"fe11e/iPTJMaIvefTkyoHZZ","Input"),function(){var i,a=[].slice;i=cc.Class({statics:{_singleton:null,left:!1,right:!1,down:!1,up:!1,callbackArray:null,reset:function(){return this.left=!1,this.right=!1,this.down=!1,this.up=!1,this.callbackArray=[]},register:function(){return this.reset(),this._singleton=new(t("Input")),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this._singleton.onKeyDown,this._singleton),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this._singleton.onKeyUp,this._singleton)},unregister:function(){return cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this._singleton.onKeyDown,this._singleton),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this._singleton.onKeyUp,this._singleton)},registerCallback:function(){var t,e,i,n,r,s;for(t=arguments[0],s=[],e=0,r=(n=2<=arguments.length?a.call(arguments,1):[]).length;e<r;e++)i=n[e],s.push(this.callbackArray[i]=t);return s}},onKeyDown:function(t){return this.handleKeyPress(t.keyCode,!0)},onKeyUp:function(t){return this.handleKeyPress(t.keyCode,!1)},handleKeyPress:function(t,e){switch(e&&i.callbackArray.length>t&&null!=i.callbackArray[t]&&i.callbackArray[t](),t){case cc.KEY.a:case cc.KEY.left:return i.left=e;case cc.KEY.d:case cc.KEY.right:return i.right=e;case cc.KEY.s:case cc.KEY.down:return i.down=e;case cc.KEY.w:case cc.KEY.up:return i.up=e}}})}.call(this),cc._RF.pop()},{Input:"Input"}],IntroPanel:[function(t,e,i){"use strict";cc._RF.push(e,"31653PB8DBIq7wofdQ0nUmV","IntroPanel"),function(){cc.Class({extends:t("Panel"),properties:{subpanelArray:[cc.Node]},onEnable:function(){return this.index=0,this.refreshActiveSubpanel()},refreshActiveSubpanel:function(){var t,e,i,n;for(n=[],t=e=0,i=this.subpanelArray.length;0<=i?e<i:i<e;t=0<=i?++e:--e)n.push(this.subpanelArray[t].active=t===this.index);return n},onConfirm:function(){return this._super(),this.index===this.subpanelArray.length-1?this.finish():(this.index++,this.refreshActiveSubpanel())},finish:function(){return this.onFinish()}})}.call(this),cc._RF.pop()},{Panel:"Panel"}],MathUtil:[function(t,e,i){"use strict";cc._RF.push(e,"54e5b+37WpNn5XW0pm1RuM2","MathUtil"),function(){e.exports.approximately=function(t,e,i){return null==i&&(i=.001),Math.abs(t-e)<i}}.call(this),cc._RF.pop()},{}],MenuController:[function(s,t,e){"use strict";cc._RF.push(t,"b9ad45IrHpO0aEALc0qgGl8","MenuController"),function(){var t;t=s("GameManager"),cc.Class({extends:cc.Component,properties:{debugIndex:-1,GameEnded:{visible:!1,get:function(){return null!=t.data&&null!=t.data.endTime}}},onLoad:function(){return cc.view.enableAntiAlias(!1),this.initializePanels(),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onInput,this)},start:function(){return this.GameEnded?this.goToPanel(this.resultsPanel):this.goToPanel(this.introPanel)},initializePanels:function(){var t,e,i,n,r;for(this.resultsPanel=this.node.getComponentInChildren(s("ResultsPanel")),this.introPanel=this.node.getComponentInChildren(s("IntroPanel")),this.titlePanel=this.node.getComponentInChildren(s("TitlePanel")),this.panelArray=[this.resultsPanel,this.introPanel,this.titlePanel],r=[],t=0,e=(n=this.panelArray).length;t<e;t++)i=n[t],r.push(i.onFinish=this.goToNextPanel.bind(this));return r},enablePanel:function(t){var e,i,n,r,s;for(s=[],e=0,i=(r=this.panelArray).length;e<i;e++)n=r[e],s.push(n.node.active=t===n);return s},goToPanel:function(t){return this.currentPanelIndex=this.panelArray.indexOf(t),this.enablePanel(t)},goToNextPanel:function(){return this.goToPanel(this.panelArray[this.currentPanelIndex+1])},onInput:function(t){switch(t.keyCode){case cc.KEY.enter:case cc.KEY.space:case cc.KEY.ctrl:return this.panelArray[this.currentPanelIndex].onConfirm()}},onDestroy:function(){return cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onInput,this)}})}.call(this),cc._RF.pop()},{GameManager:"GameManager",IntroPanel:"IntroPanel",ResultsPanel:"ResultsPanel",TitlePanel:"TitlePanel"}],NodeUtil:[function(t,e,i){"use strict";cc._RF.push(e,"e5739yI6J1GpLVuqxec+UoC","NodeUtil"),function(){e.exports.changeColorAndAlpha=function(t,e){return t.color=cc.color(e.r,e.g,e.b),t.opacity=e.a},e.exports.changeParent=function(t,e){var i,n,r,s;if(t.parent!==e)return r=(i=function(t){var e,i;for(i=(e=t).rotation;i+=(e=e.parent).rotation,null!=e.parent;);return i%=360})(t)-i(e),s=t.convertToWorldSpaceAR(cc.p(0,0)),n=e.convertToNodeSpaceAR(s),t.parent=e,t.position=n,t.rotation=r},e.exports.getComponentInChildrenInclusive=function(t,e){var i;return null!=(i=t.getComponent(e))?i:i=t.getComponentInChildren(e)},e.exports.getComponentsInChildrenInclusive=function(t,e){return t.getComponentsInChildren(e).concat(t.getComponents(e))},e.exports.getComponentInParent=function(t,e){var i,n;for(n=t;n!==cc.director.getScene();){if(null!=(i=n.getComponent(e)))return i;n=n.parent}return null},e.exports.copyNodeProperties=function(t,e){return t.position=e.position,t.rotation=e.rotation,t.scale=e.scale,t.anchor=e.anchor,t.width=e.width,t.height=e.height,t.color=e.color,t.opacity=e.opacity,t.skew=e.skew,t.group=e.group}}.call(this),cc._RF.pop()},{}],Panel:[function(t,e,i){"use strict";cc._RF.push(e,"1076e8l7EdM5LxScBdA9iHd","Panel"),function(){cc.Class({extends:cc.Component,onConfirm:function(){},finish:function(){return this.onFinish()}})}.call(this),cc._RF.pop()},{}],Persistence:[function(t,i,e){"use strict";cc._RF.push(i,"bc85cuaJ4JBDpSGlzmwYABi","Persistence"),function(){var t,e;t=function(t){var e;return null!=(e=cc.sys.localStorage.getItem(t))?e:0},e=function(t,e){return cc.sys.localStorage.setItem(t,e.toString())},i.exports.getBestScore=function(){return t("Best")},i.exports.setBestScore=function(t){return e("Best",t)},i.exports.getLastScore=function(){return t("Last")},i.exports.setLastScore=function(t){return e("Last",t)}}.call(this),cc._RF.pop()},{}],PlayerCorpse:[function(t,e,i){"use strict";cc._RF.push(e,"a1c82slatJMNrkoUUW8nO6w","PlayerCorpse"),function(){cc.Class({extends:cc.Component,onLoad:function(){var t,e;return e=cc.moveBy(.6,cc.p(0,16)).easing(cc.easeCubicActionOut()),t=cc.moveBy(1.2,cc.p(0,-256)).easing(cc.easeCubicActionIn()),this.node.runAction(cc.sequence([e,t,cc.callFunc(this.finish,this)]))},finish:function(){return this.node.destroy()}})}.call(this),cc._RF.pop()},{}],Player:[function(n,t,e){"use strict";cc._RF.push(t,"5ccfcxjqRdAQLxLUe/hbDuO","Player"),function(){var i,t,e;i=n("GameManager"),e=n("NodeUtil"),t=n("Input"),cc.Class({extends:n("Character"),properties:{cameraContainer:cc.Node,damageSFX:cc.AudioSource,Flashing:{visible:!1,get:function(){return i.i().Occurring&&this.Alive&&null!=this.flashingEndTime&&this.flashingEndTime.getTime()>Date.now()}},Alive:{visible:!1,get:function(){return 0<this.hp}}},canMove:function(){return this._super()&&this.Alive&&!i.i().Busy},onLoad:function(){return this._super(),this.sprite=e.getComponentInChildrenInclusive(this.node,cc.Sprite),this.flashingEndTime=new Date(0),this.hp=3,this.speed=64},start:function(){return this._super()},update:function(t){return this._super(),this.updateInput()},updateInput:function(){return t.up?this.direction.y=1:t.down?this.direction.y=-1:this.direction.y=0,t.right?this.direction.x=1:t.left?this.direction.x=-1:this.direction.x=0},attachCamera:function(t){return this.cameraContainer.addChild(t.node)},detachCamera:function(){var t;return t=this.cameraContainer.convertToWorldSpaceAR(cc.Vec2.ZERO),this.node.removeChild(this.cameraContainer),this.node.parent.addChild(this.cameraContainer),this.cameraContainer.position=this.cameraContainer.parent.convertToNodeSpaceAR(t)},receiveDamage:function(t){var e;if(this.Alive)return this.hp-=t,i.i().TotalHits++,this.Alive?(this.damageSFX.play(),e=this.Flashing,this.resetFlashingCounter(),e?void 0:this.goToNextFlashFrame()):this.explode()},resetFlashingCounter:function(){return this.flashingEndTime.setTime(Date.now()+2e3)},goToNextFlashFrame:function(){if(this.Flashing)return this.sprite.node.opacity=0===this.sprite.node.opacity?255:0,setTimeout(this.goToNextFlashFrame.bind(this),150);null!=this.sprite&&(this.sprite.node.opacity=255)},timeOver:function(){if(this.Alive)return i.i().TotalHits++,this.explode()},explode:function(){return this.detachCamera(),i.i().onDeath(),this._super(),this.node.active=!1},finish:function(){}})}.call(this),cc._RF.pop()},{Character:"Character",GameManager:"GameManager",Input:"Input",NodeUtil:"NodeUtil"}],ResultsLine:[function(t,e,i){"use strict";cc._RF.push(e,"88aebMYpNVNnoHE6TxT5Drc","ResultsLine"),function(){var s;s=t("FormatUtil"),cc.Class({extends:cc.Component,properties:{typeLabel:cc.Label,multiplyingLabel:cc.Label,multiplierLabel:cc.Label,product:t("IncreasingNumberLabel")},initialize:function(t,e,i,n){var r;return this.sign=n,this.typeLabel.string=t,this.sign||(this.typeLabel.string="-"+this.typeLabel.string),r=Math.min(9999,e),this.productValue=r*i,this.multiplyingLabel.string=s.exactDigits(r,4),this.multiplierLabel.string=s.exactDigits(i,3),this.product.forceValue(0)},startAnimation:function(t){return this.product.startAnimation(this.productValue,t)}})}.call(this),cc._RF.pop()},{FormatUtil:"FormatUtil",IncreasingNumberLabel:"IncreasingNumberLabel"}],ResultsPanel:[function(n,t,e){"use strict";cc._RF.push(t,"be112Jx/09B75GCW+aG5lb8","ResultsPanel"),function(){var t,e,i,s;e=n("GameManager"),t=n("GameData"),n("Player"),i=n("Persistence"),s=n("ResultsLine"),cc.Class({extends:n("Panel"),properties:{linePrefab:cc.Prefab,table:cc.Layout,result:n("IncreasingNumberLabel"),gameClearNode:cc.Node,Data:{visible:!1,get:function(){return e.data},set:function(t){return e.data=t}},DebugTesting:{visible:!1,get:function(){return null==this.Data}}},onEnable:function(){return this.clear(),this.initialize()},clear:function(){var t,e,i;if(null!=this.lineArray){for(t=0,e=(i=this.lineArray).length;t<e;t++)i[t].node.destroy();return this.lineArray.length=0}},initialize:function(){return this.canConfirm=!1,this.gameClearNode.active=!1,this.result.forceValue(0),this.index=-1,this.initializeLineArray(),this.totalValue=this.calculateTotalValue(),i.setLastScore(this.totalValue),this.totalValue>i.getBestScore()&&i.setBestScore(this.totalValue),setTimeout(this.animateNextLine.bind(this),2e3)},initializeLineArray:function(){return this.DebugTesting&&(this.Data=t.generateDebugInstance()),this.lineArray=[],this.lineArray.push(this.createLine("Clear",this.Data.lastStageNumber,999,!0)),this.lineArray.push(this.createLine("Hits",this.Data.totalHits,10,!1)),this.lineArray.push(this.createLine("Time",this.Data.Seconds,1,!1))},createLine:function(t,e,i,n){var r;return r=cc.instantiate(this.linePrefab).getComponent(s),this.table.node.addChild(r.node),r.node.setSiblingIndex(this.lineArray.length),r.initialize(t,e,i,n),r},calculateTotalValue:function(){var t,e,i,n,r;for(t=r=0,e=(n=this.lineArray).length;t<e;t++)r+=(i=n[t]).productValue*(i.sign?1:-1);return Math.max(0,r)},animateNextLine:function(){return this.index++,this.index===this.lineArray.length?this.result.startAnimation(this.totalValue,this.onFinishAnimation.bind(this)):this.lineArray[this.index].startAnimation(this.animateNextLine.bind(this))},onFinishAnimation:function(){return setTimeout((t=this,function(){return t.canConfirm=!0,t.gameClearNode.active=!0}),2e3);var t},onConfirm:function(){if(this.canConfirm)return this._super(),this.finish()}})}.call(this),cc._RF.pop()},{GameData:"GameData",GameManager:"GameManager",IncreasingNumberLabel:"IncreasingNumberLabel",Panel:"Panel",Persistence:"Persistence",Player:"Player",ResultsLine:"ResultsLine"}],Stage:[function(e,t,i){"use strict";cc._RF.push(t,"d721eFWCvhOWq3YqN4UwSZS","Stage"),function(){var t;t=e("GameManager"),e("NodeUtil"),cc.Class({extends:cc.Component,properties:{startNode:cc.Node,Number:{visible:!1,get:function(){return null==this._number&&(this._number=t.i().sceneNameArray.indexOf(cc.director.getScene().name),-1===this._number&&(this._number=1)),this._number}}},onLoad:function(){return this.bgm=this.node.getComponent(cc.AudioSource)},initialize:function(){return this.node.getComponentInChildren(e("TilemapColliderCreator")).create(),this.node.addChild(t.i().player.node),t.i().player.node.setPosition(this.calculateStartPosition())},calculateStartPosition:function(){return this.node.convertToNodeSpaceAR(this.startNode.convertToWorldSpaceAR(cc.p(0,-16)))}})}.call(this),cc._RF.pop()},{GameManager:"GameManager",NodeUtil:"NodeUtil",TilemapColliderCreator:"TilemapColliderCreator"}],TilemapColliderCreator:[function(t,e,i){"use strict";cc._RF.push(e,"b4471WJU51BIKPiPIXU7WXO","TilemapColliderCreator"),function(){t("NodeUtil"),cc.Class({extends:cc.Component,editor:{requireComponent:cc.TiledLayer},properties:{createOnLoad:!0,colliderPrefab:{default:null,type:cc.Prefab,tooltip:"When null, uses a default PhysicsBoxCollider"}},onLoad:function(){if(this.createOnLoad)return this.create()},create:function(){var t,n,e,i,r,s;for(this.layer=this.node.getComponent(cc.TiledLayer),this.tilemap=this.node.parent.getComponent(cc.TiledMap),this.tileSize=this.layer.getMapTileSize(),this.mapSizeInTiles=new cc.Size(this.tilemap.node.width/this.tileSize.width,this.tilemap.node.height/this.tileSize.height),i=[],r=t=0,e=this.mapSizeInTiles.width;0<=e?t<e:e<t;r=0<=e?++t:--t)i.push(function(){var t,e,i;for(i=[],s=t=0,e=this.mapSizeInTiles.height;0<=e?t<e:e<t;s=0<=e?++t:--t)n=cc.p(r,s),this.layer.getTileGIDAt(n)?i.push(this.createColliderTile(n)):i.push(void 0);return i}.call(this));return i},createColliderTile:function(t){var e;return e=null!=this.colliderPrefab?cc.instantiate(this.colliderPrefab):this.buildColliderTile(),this.node.addChild(e),e.setPosition(this.calculateTilePosition(t)),e},buildColliderTile:function(){var t;return(t=new cc.Node).setContentSize(this.tileSize),t.addComponent(cc.RigidBody).type=cc.RigidBodyType.Static,t.addComponent(cc.PhysicsBoxCollider).size=this.tileSize,t},calculateTilePosition:function(t){return cc.p((-(this.mapSizeInTiles.width-1)/2+t.x)*this.tileSize.width,((this.mapSizeInTiles.height-1)/2-t.y)*this.tileSize.height)}})}.call(this),cc._RF.pop()},{NodeUtil:"NodeUtil"}],TitlePanel:[function(n,t,e){"use strict";cc._RF.push(t,"e520fwdr8pD+aIqBar/9PcY","TitlePanel"),function(){var t,e,i;e=n("GameManager"),i=n("Persistence"),t=n("FormatUtil"),cc.Class({extends:n("Panel"),properties:{bestScoreLabel:cc.Label,lastScoreLabel:cc.Label},onLoad:function(){return this.bestScoreLabel.string="Best:"+t.exactDigits(i.getBestScore(),4),this.lastScoreLabel.string="Last:"+t.exactDigits(i.getLastScore(),4)},onConfirm:function(){return this._super(),e.data=null,cc.director.loadScene("Stage01")}})}.call(this),cc._RF.pop()},{FormatUtil:"FormatUtil",GameManager:"GameManager",Panel:"Panel",Persistence:"Persistence"}]},{},["Actor","Character","CharacterAnimationController","Enemy","EnemyEventHelper","Player","PlayerCorpse","GameUI","HUD","HeartRect","FlashingLabel","MenuController","IntroPanel","Panel","ResultsLine","ResultsPanel","TitlePanel","Direction","EndingController","ExitPoint","GameData","GameManager","Input","Persistence","Stage","DateUtil","FormatUtil","IncreasingNumberLabel","MathUtil","NodeUtil","TilemapColliderCreator"]);